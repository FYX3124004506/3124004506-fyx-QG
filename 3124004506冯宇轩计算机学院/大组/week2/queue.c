#include<stdio.h>
#include<stdlib.h>

//??????§ß?????
typedef struct QueueNode {
	//?????????????void*???????????
	void* data;
	//??????
	struct QueueNode* next;
}QueueNode;

//???????
typedef struct {
	QueueNode* front;//???
	QueueNode* tail;//??¦Â
}Queue;

//?????????
void initQueue(Queue* q) {
	q->front = q->tail = NULL;
}

//???
void inQueue(Queue* q, int num) {
	//???????????
	QueueNode* newNode =(QueueNode*)malloc(sizeof(QueueNode));
	//???????????
	int* data = (int*)malloc(sizeof(int));
	if (newNode == NULL) {
		printf("?????????\n");
		return;
	} if (data == NULL) {
		printf("?????????\n");
		return;
	}
	//???
	*data = num;
	newNode->data = data;//!!!
	newNode->next = NULL;
	
	if (q->tail == NULL) {
		//??????????,?????¦Â???????
		q->front = q->tail = newNode;
	}
	else {
		//???????????¦Â????????
		q->tail->next = newNode;
		//?????¦Â
		q->tail = newNode;
	}
}

//????
void* outQueue(Queue* q) {
	//??????
	if (q->front == NULL) return NULL;
	QueueNode* temp = q->front;
	void* data = temp->data;//?????????
	//???????
	q->front = q->front->next;
	//?????????????????????,??????¦Â????????????????
	if (q->front == NULL)q->tail = NULL;
	free(temp);
	return data;
}

int main() {
	Queue q;//???????
	initQueue(&q);//?????????
	int demand, num;
	void* data;
	while (1) {
		printf("1?????\n2??????\n3?????\n");
		scanf_s("%d", &demand);
		switch (demand) {
		case 1:
			//???
			printf("?????????????(????)??");
			scanf_s("%d", &num);
			inQueue(&q, num);
			break;
		case 2:
			//????
			data = outQueue(&q);
			if (data == NULL)//??????
			{ printf("???????????????!\n"); }
			else {
				printf("????????%d\n", *(int*)data);
				free(data);
			}
			break;
		case 3:
			return 0;
		default:
			printf("?????????????????\n");
			break;
		}
	}
	return 0;
}